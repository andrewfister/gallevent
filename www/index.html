{% extends "base.html" %}
{% load map_tags %}

{% block css %}
{% endblock %}

{% block prejavascript %}
<script>
var eventsJSON = [ {% for event in events %} {id: {{ event.id }},user_id: {{ event.user_id }},address: "{{ event.address|escapejs }}",subpremise: "{{ event.subpremise|escapejs }}",city: "{{ event.city|escapejs }}",state: "{{ event.state|escapejs }}",zipcode: "{{ event.zipcode|escapejs }}",name: "{{ event.name|escapejs }}",category: "{{ event.category|escapejs }}",ticket_price: {{ event.ticket_price }},start_date: "{{ event.start_date|escapejs }}",end_date: "{{ event.end_date|escapejs }}",description: "{{ event.description|escapejs }}",organizer_email: "{{ event.organizer_email|escapejs }}",organizer_phone: "{{ event.organizer_phone|escapejs }}",organizer_url: "{{ event.organizer_url|escapejs }}",latitude: {{ event.latitude }},longitude: {{ event.longitude }} }, {% endfor %} ];
</script>
{% endblock %}

{% block body-class %}home{% endblock body-class %}

{% block signin-form %}
    {% if user.is_authenticated %}
    <span class="sign-in-status"><a href="{% url gallevent.user_profile.views.show_profile %}">{{ user.username }}</a>
    <a href="{% url gallevent.login.views.sign_out %}">Sign Out</a></span>
    {% else %}
    <span class="sign-in-status"><a href="{% url gallevent.login.views.invite_request %}">Join Gallevent</a> | <a id="signIn" href="#">Sign In</a></span>
    <div class="hidden">
        <span id="user-id">{{ user.id }}</span>
        <span id="user-username">{{ user.username }}</span>
        <span id="user-firstname">{{ user.firstname }}</span>
        <span id="user-lastname">{{ user.lastname }}</span>
        <span id="user-email">{{ user.email }}</span>
    </div>
    <script>
		$("#signIn").click(function(){
			$(".sign-in-form").slideToggle(600);
		});
	</script>
    <form class="sign-in-form" style="display:none;" method="post">
        <label>Email Address:</label>
        <input type="text" class="input-standard" name="email" />
        <label>Password:</label>
        <input type="password" class="input-standard" name="password" />
        <input type="text" class="hidden" name="next" value="{{ next }}" />
        <input class="btn-sign-in" type="submit" value="Sign In" />
    </form>
    {% endif %}
{% endblock signin-form %}

{% block content %}
<form id="top-search" method="get">
    <label for="event">Search for Events:</label>
    <input type="text" id="event" name="q" placeholder="Salsa Dancing San Francisco" value="{{ request.GET.q }}" />
    <label for="time-span">Select Dates:</label>
    <span class="select">
        <select id="time-span" name="timeSpan">
            <option value="day_of">Day of</option>
            <option value="week_of">Week of</option>
            <option value="weekend_of">Weekend of</option>
        </select>
    </span>
    <span class="connecting-block">to</span>
    <input type="text" id="date1" name="start_date" placeholder="{{ form.today.value }}" value="{{ form.start_date.value }}" />
    <input class="btn-search" type="submit" value="Search" />
    
    <input type="hidden" id="user-latitude" name="latitude" value="{{ request.GET.latitude|default:0 }}" />
    <input type="hidden" id="user-longitude" name="longitude" value="{{ request.GET.longitude|default:0 }}" />
    <input type="hidden" id="map-radius" name="distance" value="{{ request.GET.distance|default:5.08 }}" />
    <input type="hidden" id="date2" name="end_date" value="{{ form.end_date.value|default:form.start_date.value }}"/>
    
</form><!-- #top-nav -->
<ul id="pin-key">
    <li><a href="#" class="key networking"><b>Networking</b><i>Industry Mixers, Conferences, Startup Events...</i></a></li>
    <li><a href="#" class="key education"><b>Education</b><i>Classes, Study Groups, Lectures...</i></a></li>
    <li><a href="#" class="key fairs"><b>Fairs &amp; Festivals</b><i>Street Fairs, Food Fairs, Cultural Festivals...</i></a></li>
    <li><a href="#" class="key athletic"><b>Athletic</b><i>Street Fairs, Food Fairs, Cultural Festivals...</i></a></li>
    <li><a href="#" class="key art"><b>Art &amp; Music</b><i>Gallery Shows, Concerts, Crafting Meetups...</i></a></li>
    <li><a href="#" class="key dancing"><b>Dancing</b><i>Dance Classes, Dance Parties, Flash Mobs...</i></a></li>
    <li><a href="#" class="key dining"><b>Dining</b><i>Events for Foodies...</i></a></li>
    <li><a href="#" class="key parties"><b>Nightlife &amp; Parties</b><i>Club Events, Drinking, Comedy Shows...</i></a></li>
</ul>
<a class="btn-post-event" href="{% url gallevent.event.views.post_event %}">Post an Event</a>
{% endblock content %}
{% block map %}
	{% show_map %}
{% endblock map %}
